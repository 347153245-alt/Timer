<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shantou Toastmasters Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      body {
        font-family: 'Inter', sans-serif;
      }
      /* Toastmasters Brand Colors Customization for Tailwind */
      :root {
        --tm-navy: #004165;
        --tm-burgundy: #772432;
        --tm-yellow: #f2df74;
        --tm-grey: #a9b7b1;
      }
      @media print {
        @page {
          size: A4;
          margin: 10mm;
        }
        body {
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
        }
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              tm: {
                navy: '#004165',
                burgundy: '#772432',
                yellow: '#f2df74',
                grey: '#a9b7b1',
                'light-grey': '#f5f7f7',
              }
            }
          }
        }
      }
    </script>
    <script type="importmap">
    {
      "imports": {
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react/": "https://esm.sh/react@^19.2.3/",
        "react": "https://esm.sh/react@^19.2.3",
        "recharts": "https://esm.sh/recharts@^3.6.0",
        "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
      }
    }
    </script>
  </head>
  <body class="bg-gray-50 text-slate-900 h-screen overflow-hidden print:h-auto print:overflow-visible">
    <div id="root" class="h-full flex flex-col print:block"></div>

    <!-- 添加按钮以调用保存和加载数据 -->
    <div class="flex justify-center space-x-4 mt-8">
      <button 
        onclick="saveData()" 
        class="px-6 py-3 bg-tm-burgundy text-white rounded-full hover:bg-tm-navy">
        保存数据
      </button>
      <button 
        onclick="loadData()" 
        class="px-6 py-3 bg-tm-yellow text-tm-navy rounded-full hover:bg-tm-grey">
        加载数据
      </button>
    </div>
 <script type="module" src="/index.tsx'></script>
    <!-- 添加Supabase保存和读取数据的JS代码 -->
    <script>
      // 配置 Supabase
      const SUPABASE_URL = "https://uvpztseftcdeqfwbbrrv.supabase.co"; 
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2cHp0c2VmdGNkZXFmd2JicnJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3NDc3NTksImV4cCI6MjA4NDMyMzc1OX0.PKfl6x7OEVoLy9msdkq92DZ8-qXsWwzOVv_kaU-SWhQ"; 
      const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      // 保存数据到 Supabase
      async function saveData() {
        const dataToSave = {
          role: "Timer", // 示例，替换成你的实际数据
          target_time: 3, // 示例字段
          actual_time: 3.1 // 示例字段
        };

        const { data, error } = await supabase
          .from('timer_data')
          .insert([
            { data: JSON.stringify(dataToSave) }
          ]);

        if (error) {
          console.error("保存失败", error);
        } else {
          console.log("保存成功", data);
        }
      }

      // 从 Supabase 读取数据
      async function loadData() {
        const { data, error } = await supabase
          .from('timer_data')
          .select('data')
          .order('id', { ascending: false })
          .limit(1);

        if (error) {
          console.error("加载失败", error);
        } else {
          const loadedData = JSON.parse(data[0].data);
          console.log("加载数据", loadedData);

          // 你可以在这里用加载的数据填充页面的相关元素
          // 比如：
          // document.getElementById("timer").innerText = loadedData.target_time;
        }
      }
    </script>
  </body>
</html>
